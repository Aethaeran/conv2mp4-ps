# conv2mp4-ps
Powershell script that recursively searches through a user-defined file path and convert all videos of user-specified  file types to MP4 with H264 video and AAC audio as needed using ffmpeg. If a conversion failure is detected, the script re-encodes the file with HandbrakeCLI. Upon successful encoding, Plex libraries are refreshed and source file is deleted.  The purpose of this script is to reduce the amount of transcoding CPU load on a Plex server and increase video compatibility across platforms.<br><br>
Python version can be found here: <a href="https://github.com/BrianDMG/conv2mp4-py">conv2mp4-py</a><br><br>
<b><u>Dependencies</u></b><br>This script requires:<ul><li>PowerShell 3.0 - <a href="https://blogs.technet.microsoft.com/heyscriptingguy/2014/10/13/powertip-check-version-of-powershell/">How to check your PowerShell version</a></li><li>ffmpeg (ffmpeg.exe, ffprobe.exe) - <a href="https://ffmpeg.org/download.html">Download</a></li><li>Handbrake (HandbrakeCLI.exe) - <a href="https://handbrake.fr/downloads.php">Download</a></li></ul><b>Usage</b><ol><li>Unzip or place script files in the same directory or folder</li><li>Prior to running the script, run the interactive configuration setup utility (<i>setup_conv2mp4-ps.ps1</i>)</li><li>Run the script (<i>conv2mp4-ps.ps1</i>) either manually or as a scheduled task for full automation.</li></ol><br><b>Features</b><ul><li>Allows for full automation of video conversion on your media server</li><li>Select what media you want to convert by file path</li><li>Select what file types you want to be converted</li><li>Detailed logging allows easy tracking of what files are in the queue, overall queue progress, individual and cumulative file size gains and reductions, as well as total hours of video converted, how long it took to convert them, and the average encode speed.</li><li>Refreshes Plex libraries upon completion of each item in the queue</li><li>Garbage collection allows user-specified file types to be deleted during each execution (<i>keeps non-media files such as .nfo or thumbs.db from accumulating</i>)</li></ul>
